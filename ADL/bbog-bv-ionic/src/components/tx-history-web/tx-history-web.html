<div class="table-wrapper">
  <ion-grid no-padding>
    <ion-row>
      <ion-col col-10 hidden-md-down>
        <div class="table-wrapper__search-filter">
        <div class="history__text pulse-tp-hl3-comp-m">{{title}}</div>
          <div [@showFilter]="!_isShowFilter">
            <bdb-search-filter #searchFilter *ngIf="optionFilter" (onDataRangeClicked)="onDataRangeClicked($event)"
              (onSelectClicked)="onSelectClicked($event)" [minDate]="minDate" [quickSelect]="quickSelect"
              [datePicker]="datePicker">
            </bdb-search-filter>
          </div>
          <div class="tag" [hidden]="showTransactionsError || showTransactionsLoader ">
              <div class="tag__text pulse-tp-bo3-comp-m">{{description}}</div>
              <pulse-tag [hidden]="!onHideSearch" class="tag__group"
                fill="outline"
                color="primary"
                colorvariant="400"
                text="Último mes"
                closeable="false"
                size="s">
              </pulse-tag>

            </div>

          </div>
      </ion-col>
      <ion-col col-2>
        <div hidden-md-down class="table-wrapper__options">
          <button ion-fab mini [color]="colorCal" *ngIf="optionFilter" (click)="onShowFilter()"
            [disabled]="showTransactionsLoader">
            <svg *ngIf="!_isShowFilter" xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19">
              <path fill="#9B9B9B" fill-rule="evenodd"
                d="M16.875 1.813c.316 0 .583.108.8.325.217.216.325.483.325.8V17c0 .305-.108.568-.325.791a1.073 1.073 0 0 1-.8.334H1.125c-.316 0-.583-.111-.8-.334A1.096 1.096 0 0 1 0 17V2.937c0-.316.108-.583.325-.8.217-.216.484-.325.8-.325h4.5V.688a.54.54 0 0 1 .167-.395.54.54 0 0 1 .396-.167.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125h4.5V.688a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125h4.5zm0 15.187V2.937h-4.5V3.5a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-.563h-4.5V3.5a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-.563h-4.5V17h15.75zm-3.938-7.875a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396V7.438a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124a.54.54 0 0 1 .396.167.54.54 0 0 1 .167.396v1.125a.54.54 0 0 1-.167.395.54.54 0 0 1-.396.167h-1.124zm0 4.5a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-1.124a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124a.54.54 0 0 1 .396.167.54.54 0 0 1 .167.396v1.124a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167h-1.124zm-3.374-2.25a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.124a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167H8.438a.54.54 0 0 1-.396-.167.54.54 0 0 1-.167-.396v-1.124a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124zm0-4.5a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125a.54.54 0 0 1-.167.395.54.54 0 0 1-.396.167H8.438a.54.54 0 0 1-.396-.167.54.54 0 0 1-.167-.396V7.438a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124zm-4.5 0a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125a.54.54 0 0 1-.167.395.54.54 0 0 1-.396.167H3.938a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396V7.438a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124zm0 4.5a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.124a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167H3.938a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-1.124a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124z" />
            </svg>
            <svg *ngIf="_isShowFilter" xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19">
              <path fill="#0041a8" fill-rule="evenodd"
                d="M16.875 1.813c.316 0 .583.108.8.325.217.216.325.483.325.8V17c0 .305-.108.568-.325.791a1.073 1.073 0 0 1-.8.334H1.125c-.316 0-.583-.111-.8-.334A1.096 1.096 0 0 1 0 17V2.937c0-.316.108-.583.325-.8.217-.216.484-.325.8-.325h4.5V.688a.54.54 0 0 1 .167-.395.54.54 0 0 1 .396-.167.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125h4.5V.688a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125h4.5zm0 15.187V2.937h-4.5V3.5a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-.563h-4.5V3.5a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-.563h-4.5V17h15.75zm-3.938-7.875a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396V7.438a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124a.54.54 0 0 1 .396.167.54.54 0 0 1 .167.396v1.125a.54.54 0 0 1-.167.395.54.54 0 0 1-.396.167h-1.124zm0 4.5a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-1.124a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124a.54.54 0 0 1 .396.167.54.54 0 0 1 .167.396v1.124a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167h-1.124zm-3.374-2.25a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.124a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167H8.438a.54.54 0 0 1-.396-.167.54.54 0 0 1-.167-.396v-1.124a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124zm0-4.5a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125a.54.54 0 0 1-.167.395.54.54 0 0 1-.396.167H8.438a.54.54 0 0 1-.396-.167.54.54 0 0 1-.167-.396V7.438a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124zm-4.5 0a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.125a.54.54 0 0 1-.167.395.54.54 0 0 1-.396.167H3.938a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396V7.438a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124zm0 4.5a.54.54 0 0 1 .395.167.54.54 0 0 1 .167.396v1.124a.54.54 0 0 1-.167.396.54.54 0 0 1-.396.167H3.938a.54.54 0 0 1-.395-.167.54.54 0 0 1-.167-.396v-1.124a.54.54 0 0 1 .167-.396.54.54 0 0 1 .396-.167h1.124z" />
            </svg>
          </button>
          <button ion-fab mini color="white" *ngIf="optionDownloadCsv" (click)="onDownloadCsv($event)"
            [disabled]="showTransactionsLoader || (dataSource.length < 1)">
            <img src="assets/imgs/history/download.svg">
          </button>
          <button ion-fab mini color="white" *ngIf="optionPrint" (click)="onPrint()"
            [disabled]="showTransactionsLoader || (dataSource.length < 1)">
            <img src="assets/imgs/history/print.svg">
          </button>
        </div>
      </ion-col>

      <ion-col col-12 hidden-lg-up>
        <div class="table-wrapper__search-filter">
          <bdb-search-filter #searchFilterMobile *ngIf="optionFilter" (onDataRangeClicked)="onDataRangeClicked($event)"
            (onSelectClicked)="onSelectClicked($event)" [minDate]="minDate" [quickSelect]="quickSelect"
            [datePicker]="datePicker">
          </bdb-search-filter>
           <div class="tag" [hidden]="showTransactionsError || showTransactionsLoader ">
              <div class="tag__text pulse-tp-bo3-comp-m">{{description}}</div>
              <pulse-tag [hidden]="!onHideSearch" class="tag__group"
                fill="outline"
                color="primary"
                colorvariant="400"
                text="Último mes"
                closeable="false"
                size="s">
              </pulse-tag>

            </div>
        </div>
      </ion-col>
    </ion-row>

    <ion-row class="table-wrapper__theader" align-items-center hidden-xs-down>
      <ion-col *ngFor="let column of columns" addAttributeCol [tablet]="column.tablet" [mobile]="column.mobile"
        [lg]="column.lg" [xl]="column.xl" [md]="column.md" [sm]="column.sm" [col]="column.col"
        [ngClass]="['table-wrapper__th', 'title'].concat(column.class ? column.class(data) : [])">
        {{ column.header }}
      </ion-col>
    </ion-row>

    <ion-row *ngIf="showTransactionsLoader">
      <ion-col col-12>
        <div class="loader-wrapper">
          <bdb-loader color="steel"></bdb-loader>
        </div>
      </ion-col>
    </ion-row>
    <ion-row class="table-wrapper__error-row" *ngIf="showTransactionsError">
      <ion-col col-12 text-center>
        <div class="table-wrapper__error-row__icon-container">
          <img src="assets/imgs/alert.svg">
        </div>
        <div class="table-wrapper__error-row__err-msg">
          {{error}}
        </div>
      </ion-col>
    </ion-row>

    <ng-container *ngFor="let data of dataSource; let i = index; let odd = odd; let even = even;">
      <ion-row [ngClass]="['table-wrapper__tbody', 'date-mobile']" align-items-center hidden-md-up
        *ngIf="_validateDateMobile(i, data, dataSource)">
        <ion-col col-12 [ngClass]="['table-wrapper__td', 'date-mobile']">
          {{ _validateDateMobile(i, data, dataSource) }}
        </ion-col>
      </ion-row>
      <ion-row [ngClass]="['table-wrapper__tbody',  even ? 'stripped' : '', (indxExpanded === i)?'selected-row':'']"
        align-items-center (click)="exdpandData(i)">
        <ion-col *ngFor="let column of columns;" addAttributeCol [tablet]="column.tablet" [mobile]="column.mobile"
          [hiddenWeb]="false" [lg]="column.lg" [xl]="column.xl" [md]="column.md" [sm]="column.sm" [col]="column.col"
          [ngClass]="[(indxExpanded === i)?'selected-row':'', 'table-wrapper__td'].concat(column.class ? column.class(data) : ['text'])">
          <div (click)="_eventBtn1(data)" *ngIf="column.btn1" style="cursor: pointer; display: table; margin: 0 auto;">
            <img [src]="'assets/imgs/' + column.cell(data)">
          </div>
          <div class="tab-avatar" *ngIf="column.img">
            <img [src]="'assets/imgs/' + column.cell(data)">
          </div>
          {{ (!column.btn1 && !column.img) ? column.cell(data) : '' }}
        </ion-col>
      </ion-row>
      <ion-row *ngIf="indxExpanded === i && isExpandable" [@expandRow]="indxExpanded === i" class="main-expand">
        <ion-grid>
          <ion-row *ngFor="let subData of expandableData" addAttributeCol [hiddenWeb]="subData.hiddenWeb"
            [tablet]="true" [mobile]="true">
            <ion-col offset-lg-2 col-lg-4 class="detail-title">
              {{ subData.title }}
            </ion-col>
            <ion-col col-lg-4 class="detail-data">
              {{ subData.cell(data) }}
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-row>
    </ng-container>
  </ion-grid>
</div>
